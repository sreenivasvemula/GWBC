<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xml:lang="en" lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
    <meta http-equiv="Content-Style-Type" content="text/css" />
    <!-- MOTW-DISABLED saved from url=(0014)about:internet -->
    <title>Configuring the Database Upgrade</title>
    <link rel="StyleSheet" href="css/procedure-db-d.css" type="text/css" media="all" />
    <link rel="StyleSheet" href="css/webworks.css" type="text/css" media="all" />
    <link rel="StyleSheet" href="css/css-guidewire-extra.css" type="text/css" media="all" />
    <script type="text/javascript" language="JavaScript1.2" src="wwhdata/common/context.js"></script>
    <script type="text/javascript" language="JavaScript1.2" src="wwhdata/common/towwhdir.js"></script>
    <script type="text/javascript" language="JavaScript1.2" src="wwhdata/common/wwhpagef.js"></script>
    <script type="text/javascript" language="JavaScript1.2">
      <!--
        var  WebWorksRootPath = "";
      // -->
    </script>
    <script type="text/javascript" language="JavaScript1.2">
      <!--
        // Set reference to top level help frame
        //
        var  WWHFrame = WWHGetWWHFrame("", true);
      // -->
    </script>
    <script type="text/javascript" language="JavaScript1.2" src="scripts/expand.js"></script>
    <!-- THE FOLLOWING IS A GUIDEWIRE STYLE DEFINITION FOR THE LINK TO THIS FEATURE -->
    <link rel="StyleSheet" href="css/css-guidewire-extra.css" type="text/css" media="all" />
    <!-- THE FOLLOWING IS A GUIDEWIRE GSCRIPT FUNCTION FOR THE LINK TO THIS FEATURE -->
    <script type="text/javascript">
function guidewire_selectall()
{
var text_val=eval("document.linktothisurlform.urlfield");
text_val.focus();
text_val.select();
}
</script>
  </head>
  <body onLoad="WWHUpdate();" onUnload="WWHUnload();" onKeyDown="WWHHandleKeyDown((document.all||document.getElementById||document.layers)?event:null);" onKeyPress="WWHHandleKeyPress((document.all||document.getElementById||document.layers)?event:null);" onKeyUp="WWHHandleKeyUp((document.all||document.getElementById||document.layers)?event:null);">
    <!-- THE FOLLOWING IS A GUIDEWIRE DIV FOR THE 'LINK TO THIS' FEATURE -->
    <div id="linkToThisPage" class="popup" style="display: none;">
      <div class="popupTitle">Link Directly to This Page 
           <a href="#" onclick="var thePopup = getElementById('linkToThisPage');thePopup.style.display='none';return false;"><img class="popupClosebox" src="wwhelp/wwhimpl/common/images/close.gif" /></a></div>
      <div style="padding:6px;">
        <div class="popupText" id="linkToThisPageBookmark">An error has occurred if you see this messsage.</div>
        <form name="linktothisurlform" method="post" action="" style="width:275px;margin:0px">
          <input type="text" class="popupURLText" id="linkToThisPageURL" name="urlfield" rows="1" cols="55" onClick="guidewire_selectall();" onFocus="guidewire_selectall();"></input>
        </form>
      </div>
    </div>
    <br />
    <div class="WebWorks_Breadcrumbs" style="text-align: left;">
      <span>BillingCenter Upgrade Guide</span> : 
    <span class="WebWorks_Breadcrumbs" style="text-align: left;"><a class="WebWorks_Breadcrumb_Link" href="p-upgrade-d.html#1925628">Upgrading from 7.0.x</a> : <a class="WebWorks_Breadcrumb_Link" href="procedure-db-d.12.01.html#1925628">Upgrading the BillingCenter 7.0.x Database</a> : Configuring the Database Upgrade</span></div>
    <hr align="left" />
    <blockquote>
      <h3 class="H1_-_Heading_1"><a name="1925628">Configuring the Database Upgrade</a></h3>
      <div class="B_-_Body"><a name="1925635">You can set parameters for the database upgrade in the BillingCenter 8.0.4 </a><span class="cv_-_computer_voice">database-config.xml</span> file. The <span class="cv_-_computer_voice">&lt;database&gt;</span> block in <span class="cv_-_computer_voice">database-config.xml</span> contains parameters for database configuration, such as connection information. The <span class="cv_-_computer_voice">&lt;database&gt;</span> block contains an <span class="cv_-_computer_voice">&lt;upgrade&gt;</span> block that contains configuration information for the overall database upgrade. The <span class="cv_-_computer_voice">&lt;upgrade&gt;</span> block also contains a <span class="cv_-_computer_voice">&lt;versiontriggers&gt;</span> element for configuring general version trigger behavior and can contain <span class="cv_-_computer_voice">&lt;versiontrigger&gt;</span> elements to configure each version trigger. </div>
      <div class="B_-_Body"><a name="1925636">This topic describes the parameters you can set for the database upgrade. For general database connection parameters, see </a><a href="javascript:WWHClickedPopup('install', 'install.6.16.html#1130592', '');" title="Deploying BillingCenter to the Application Server">“Deploying BillingCenter to the Application Server” in the </a><span class="bt_-_book_title"><a href="javascript:WWHClickedPopup('install', 'install.6.16.html#1130592', '');" title="Deploying BillingCenter to the Application Server">Installation Guide</a></span>.</div>
      <h4 class="H2_-_Heading_2"><a name="1925640">Adjusting Commit Size for Encryption</a></h4>
      <div class="B_-_Body"><a name="1925641">You can adjust the commit size for rows requiring encryption by setting the </a><span class="cv_-_computer_voice">encryptioncommitsize</span> attribute to an integer in the <span class="cv_-_computer_voice">&lt;upgrade&gt;</span> block. For example:</div>
      <PRE class="CF_-_Code_First_Line"><a name="1925642">&lt;database ...&gt;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1925643">&nbsp;&nbsp;...</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1925644">&nbsp;&nbsp;&lt;upgrade encryptioncommitsize="10000"&gt;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1925645">&nbsp;&nbsp;&nbsp;&nbsp;...</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1925646">&nbsp;&nbsp;&lt;/upgrade&gt;</a></PRE>
      <PRE class="CL_-_Code_Last_Line"><a name="1925647">&lt;/database&gt;</a></PRE>
      <div class="B_-_Body"><a name="1925654">If BillingCenter encryption is applied on one or more attributes, the BillingCenter database upgrade commits batches of encrypted values. The upgrade commits </a><span class="cv_-_computer_voice">encryptioncommitsize</span> rows at a time in each batch. The default value of <span class="cv_-_computer_voice">encryptioncommitsize</span> varies based on the database type. For Oracle, the default is <span class="cv_-_computer_voice">10000</span>. For SQL Server, the default is <span class="cv_-_computer_voice">100</span>. </div>
      <div class="B_-_Body"><a name="1925655">Test the upgrade on a copy of your production database before attempting to upgrade the actual production database. If the encryption process is slow, and you cannot attribute the slowness to SQL statements in the database, try adjusting the </a><span class="cv_-_computer_voice">encryptioncommitsize</span> attribute. After you have optimized performance of the encryption process, use that <span class="cv_-_computer_voice">encryptioncommitsize</span> when you upgrade your production database.</div>
      <h4 class="H2_-_Heading_2"><a name="1925656">Configuring Version Trigger Elements</a></h4>
      <div class="B_-_Body"><a name="1925658">The database upgrade executes a series of version triggers that make changes to the database to upgrade between versions. You can set some configuration options for version triggers in </a><span class="cv_-_computer_voice">database-config.xml</span>. Normally, the default settings are sufficient. Change these settings only while investigating a slow database upgrade.</div>
      <div class="B_-_Body"><a name="1925659">The </a><span class="cv_-_computer_voice">&lt;database&gt; </span>element in <span class="cv_-_computer_voice">database-config.xml</span> contains an <span class="cv_-_computer_voice">&lt;upgrade&gt;</span> element to organize parameters related to database upgrades. Included in the <span class="cv_-_computer_voice">&lt;upgrade&gt; </span>element is a <span class="cv_-_computer_voice">&lt;versiontriggers&gt;</span> element, as shown below:</div>
      <PRE class="CF_-_Code_First_Line"><a name="1925660">&lt;database ...&gt;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1925661">  &lt;param ... /&gt;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1925662">  &lt;upgrade&gt;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1925663">    &lt;versiontriggers dbmsperfinfothreshold="600" /&gt;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1925664">  &lt;/upgrade&gt;</a></PRE>
      <PRE class="CL_-_Code_Last_Line"><a name="1925665">&lt;/database&gt;</a></PRE>
      <div class="BKN_-_Body_002c_Keep_Next"><a name="1925666">The </a><span class="cv_-_computer_voice">&lt;versiontriggers&gt;</span> element configures the instrumentation of version triggers. This element has one attribute: <span class="cv_-_computer_voice">dbmsperfinfothreshold</span>. The <span class="cv_-_computer_voice">dbmsperfinfothreshold</span> attribute specifies for all version triggers the threshold after which the database upgrader gathers performance information from the database. You specify <span class="cv_-_computer_voice">dbmsperfinfothreshold</span> in seconds, with a default of <span class="cv_-_computer_voice">600</span>. If a version trigger takes longer than <span class="cv_-_computer_voice">dbmsperfinfothreshold</span> to execute, BillingCenter:</div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a name="1925670">queries the underlying database management system (DBMS).</a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a name="1925671">builds a set of html pages with performance information for the interval in which the version trigger was executing.</a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a name="1925672">includes those html pages in the upgrader instrumentation for the version trigger. </a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="B_-_Body"><a name="1925673">You can completely turn off the collection of database snapshot instrumentation for version triggers by setting the </a><span class="cv_-_computer_voice">dbmsperfinfothreshold</span> to 0 in <span class="cv_-_computer_voice">config.xml</span>.</div>
      <div class="BKN_-_Body_002c_Keep_Next"><a name="1925674">The </a><span class="cv_-_computer_voice">&lt;versiontriggers&gt; </span>element can contain optional <span class="cv_-_computer_voice">&lt;versiontrigger&gt;</span> elements for each version trigger. Each <span class="cv_-_computer_voice">&lt;versiontrigger&gt;</span> element can contain the following attributes.</div>
      <div class="T_-_Table"><a name="1925742">&nbsp;</a></div>
      <table class="Shading" style="text-align: left" border="0" cellpadding="10" cellspacing="0" summary="">
        <caption></caption>
        <tr>
          <td style="border-bottom-color: #000000; border-bottom-style: solid; border-bottom-width: 0.5pt; border-top-color: #000000; border-top-style: solid; border-top-width: 0.5pt; padding-bottom: 2pt; padding-left: 2pt; padding-right: 8pt; padding-top: 2pt; vertical-align: bottom">
            <div class="TH_-_Table_Heading"><a name="1925677">Attribute</a></div>
          </td>
          <td style="border-bottom-color: #000000; border-bottom-style: solid; border-bottom-width: 0.5pt; border-top-color: #000000; border-top-style: solid; border-top-width: 0.5pt; padding-bottom: 2pt; padding-left: 2pt; padding-right: 8pt; padding-top: 2pt; vertical-align: bottom">
            <div class="TH_-_Table_Heading"><a name="1925679">Type</a></div>
          </td>
          <td style="border-bottom-color: #000000; border-bottom-style: solid; border-bottom-width: 0.5pt; border-top-color: #000000; border-top-style: solid; border-top-width: 0.5pt; padding-bottom: 2pt; padding-left: 2pt; padding-right: 8pt; padding-top: 2pt; vertical-align: bottom">
            <div class="TH_-_Table_Heading"><a name="1925681">Description</a></div>
          </td>
        </tr>
        <tr>
          <td style="border-bottom-color: #c0d1d1; border-bottom-style: solid; border-bottom-width: 0.15pt; border-top-color: #000000; border-top-style: solid; border-top-width: 0.5pt; padding-bottom: 2pt; padding-left: 2pt; padding-right: 8pt; padding-top: 2pt; vertical-align: top">
            <div class="TT_-_Table_Text" style="color: #000000; font-family: &quot;Lucida Sans Typewriter&quot;; font-style: normal; font-variant: normal; font-weight: normal; margin-top: 3.0pt; text-transform: none; vertical-align: baseline"><span class="cvt_-_computer_voice_table"><a name="1925683">name</a></span></div>
          </td>
          <td style="border-bottom-color: #c0d1d1; border-bottom-style: solid; border-bottom-width: 0.15pt; border-top-color: #000000; border-top-style: solid; border-top-width: 0.5pt; padding-bottom: 2pt; padding-left: 2pt; padding-right: 8pt; padding-top: 2pt; vertical-align: top">
            <div class="TT_-_Table_Text"><a name="1925685">String</a></div>
          </td>
          <td style="border-bottom-color: #c0d1d1; border-bottom-style: solid; border-bottom-width: 0.15pt; border-top-color: #000000; border-top-style: solid; border-top-width: 0.5pt; padding-bottom: 2pt; padding-left: 2pt; padding-right: 8pt; padding-top: 2pt; vertical-align: top">
            <div class="TT_-_Table_Text"><a name="1925687">The case-insensitive name of a version trigger.</a></div>
          </td>
        </tr>
        <tr>
          <td style="border-bottom-color: #c0d1d1; border-bottom-style: solid; border-bottom-width: 0.15pt; border-top-color: #c0d1d1; border-top-style: solid; border-top-width: 0.15pt; padding-bottom: 2pt; padding-left: 2pt; padding-right: 8pt; padding-top: 2pt; vertical-align: top">
            <div class="TT_-_Table_Text" style="color: #000000; font-family: &quot;Lucida Sans Typewriter&quot;; font-style: normal; font-variant: normal; font-weight: normal; margin-top: 3.0pt; text-transform: none; vertical-align: baseline"><span class="cvt_-_computer_voice_table"><a name="1925689">extendedquerytracingenabled </a></span></div>
          </td>
          <td style="border-bottom-color: #c0d1d1; border-bottom-style: solid; border-bottom-width: 0.15pt; border-top-color: #c0d1d1; border-top-style: solid; border-top-width: 0.15pt; padding-bottom: 2pt; padding-left: 2pt; padding-right: 8pt; padding-top: 2pt; vertical-align: top">
            <div class="TT_-_Table_Text"><a name="1925691">Boolean</a></div>
          </td>
          <td style="border-bottom-color: #c0d1d1; border-bottom-style: solid; border-bottom-width: 0.15pt; border-top-color: #c0d1d1; border-top-style: solid; border-top-width: 0.15pt; padding-bottom: 2pt; padding-left: 2pt; padding-right: 8pt; padding-top: 2pt; vertical-align: top">
            <div class="TT_-_Table_Text"><a name="1925693">Oracle only. Controls whether or not to enable extended sql tracing (Oracle event 10046) for the SQL statements that are executed by the version trigger. Default is </a><span class="cvt_-_computer_voice_table">false</span>. The output can be very useful when debugging certain types of performance problems. Trace files that are generated only exist on the database machine. They are not integrated into the upgrade instrumentation.</div>
          </td>
        </tr>
        <tr>
          <td style="border-bottom-color: #c0d1d1; border-bottom-style: solid; border-bottom-width: 0.15pt; border-top-color: #c0d1d1; border-top-style: solid; border-top-width: 0.15pt; padding-bottom: 2pt; padding-left: 2pt; padding-right: 8pt; padding-top: 2pt; vertical-align: top">
            <div class="TT_-_Table_Text" style="color: #000000; font-family: &quot;Lucida Sans Typewriter&quot;; font-style: normal; font-variant: normal; font-weight: normal; margin-top: 3.0pt; text-transform: none; vertical-align: baseline"><span class="cvt_-_computer_voice_table"><a name="1925695">parallel-dml</a></span></div>
          </td>
          <td style="border-bottom-color: #c0d1d1; border-bottom-style: solid; border-bottom-width: 0.15pt; border-top-color: #c0d1d1; border-top-style: solid; border-top-width: 0.15pt; padding-bottom: 2pt; padding-left: 2pt; padding-right: 8pt; padding-top: 2pt; vertical-align: top">
            <div class="TT_-_Table_Text"><a name="1925697">Boolean</a></div>
          </td>
          <td style="border-bottom-color: #c0d1d1; border-bottom-style: solid; border-bottom-width: 0.15pt; border-top-color: #c0d1d1; border-top-style: solid; border-top-width: 0.15pt; padding-bottom: 2pt; padding-left: 2pt; padding-right: 8pt; padding-top: 2pt; vertical-align: top">
            <div class="TT_-_Table_Text"><a name="1925701">Oracle only. See </a><a href="javascript:WWHClickedPopup('upgrade', 'procedure-db-d.12.17.html#1925812', '');" title="Configuring the Database Upgrade">“Configuring Parallel DML and DDL Statement Execution”</a>.</div>
          </td>
        </tr>
        <tr>
          <td style="border-bottom-color: #c0d1d1; border-bottom-style: solid; border-bottom-width: 0.15pt; border-top-color: #c0d1d1; border-top-style: solid; border-top-width: 0.15pt; padding-bottom: 2pt; padding-left: 2pt; padding-right: 8pt; padding-top: 2pt; vertical-align: top">
            <div class="TT_-_Table_Text" style="color: #000000; font-family: &quot;Lucida Sans Typewriter&quot;; font-style: normal; font-variant: normal; font-weight: normal; margin-top: 3.0pt; text-transform: none; vertical-align: baseline"><span class="cvt_-_computer_voice_table"><a name="1925704">queryoptimizertracingenabled</a></span></div>
          </td>
          <td style="border-bottom-color: #c0d1d1; border-bottom-style: solid; border-bottom-width: 0.15pt; border-top-color: #c0d1d1; border-top-style: solid; border-top-width: 0.15pt; padding-bottom: 2pt; padding-left: 2pt; padding-right: 8pt; padding-top: 2pt; vertical-align: top">
            <div class="TT_-_Table_Text"><a name="1925706">Boolean</a></div>
          </td>
          <td style="border-bottom-color: #c0d1d1; border-bottom-style: solid; border-bottom-width: 0.15pt; border-top-color: #c0d1d1; border-top-style: solid; border-top-width: 0.15pt; padding-bottom: 2pt; padding-left: 2pt; padding-right: 8pt; padding-top: 2pt; vertical-align: top">
            <div class="TT_-_Table_Text"><a name="1925708">Oracle only. Controls whether or not to enable query optimizer tracing (Oracle event 10053) for the SQL statements that are executed by the version trigger. Default is </a><span class="cvt_-_computer_voice_table">false</span>. The output can be very useful when debugging certain types of performance problems. Trace files that are generated only exist on the database machine. They are not integrated into the upgrade instrumentation.</div>
          </td>
        </tr>
        <tr>
          <td style="border-bottom-color: #c0d1d1; border-bottom-style: solid; border-bottom-width: 0.15pt; border-top-color: #c0d1d1; border-top-style: solid; border-top-width: 0.15pt; padding-bottom: 2pt; padding-left: 2pt; padding-right: 8pt; padding-top: 2pt; vertical-align: top">
            <div class="TT_-_Table_Text" style="color: #000000; font-family: &quot;Lucida Sans Typewriter&quot;; font-style: normal; font-variant: normal; font-weight: normal; margin-top: 3.0pt; text-transform: none; vertical-align: baseline"><span class="cvt_-_computer_voice_table"><a name="1925710">recordcounters</a></span></div>
          </td>
          <td style="border-bottom-color: #c0d1d1; border-bottom-style: solid; border-bottom-width: 0.15pt; border-top-color: #c0d1d1; border-top-style: solid; border-top-width: 0.15pt; padding-bottom: 2pt; padding-left: 2pt; padding-right: 8pt; padding-top: 2pt; vertical-align: top">
            <div class="TT_-_Table_Text"><a name="1925712">Boolean</a></div>
          </td>
          <td style="border-bottom-color: #c0d1d1; border-bottom-style: solid; border-bottom-width: 0.15pt; border-top-color: #c0d1d1; border-top-style: solid; border-top-width: 0.15pt; padding-bottom: 2pt; padding-left: 2pt; padding-right: 8pt; padding-top: 2pt; vertical-align: top">
            <div class="TT_-_Table_Text"><a name="1925714">Controls whether the DBMS-specific counters are retrieved at the beginning and end of the use of the version trigger. Default is </a><span class="cvt_-_computer_voice_table">false</span>. If <span class="cvt_-_computer_voice_table">true</span>, then BillingCenter retrieves the current state of the counters from the underlying DBMS at the beginning of execution of the version trigger. If the execution of the version trigger exceeds the <span class="cvt_-_computer_voice_table">dbmsperfinfothreshold</span>, then BillingCenter retrieves the current state of the counters at the end of the execution of the version trigger. BillingCenter writes differences to the DBMS-specific instrumentation pages of the upgrade instrumentation.</div>
          </td>
        </tr>
        <tr>
          <td style="border-bottom-color: #c0d1d1; border-bottom-style: solid; border-bottom-width: 0.15pt; border-top-color: #c0d1d1; border-top-style: solid; border-top-width: 0.15pt; padding-bottom: 2pt; padding-left: 2pt; padding-right: 8pt; padding-top: 2pt; vertical-align: top">
            <div class="TT_-_Table_Text" style="color: #000000; font-family: &quot;Lucida Sans Typewriter&quot;; font-style: normal; font-variant: normal; font-weight: normal; margin-top: 3.0pt; text-transform: none; vertical-align: baseline"><span class="cvt_-_computer_voice_table"><a name="1925725">updatejoinorderedhint</a></span></div>
          </td>
          <td style="border-bottom-color: #c0d1d1; border-bottom-style: solid; border-bottom-width: 0.15pt; border-top-color: #c0d1d1; border-top-style: solid; border-top-width: 0.15pt; padding-bottom: 2pt; padding-left: 2pt; padding-right: 8pt; padding-top: 2pt; vertical-align: top">
            <div class="TT_-_Table_Text"><a name="1925727">Boolean</a></div>
          </td>
          <td style="border-bottom-color: #c0d1d1; border-bottom-style: solid; border-bottom-width: 0.15pt; border-top-color: #c0d1d1; border-top-style: solid; border-top-width: 0.15pt; padding-bottom: 2pt; padding-left: 2pt; padding-right: 8pt; padding-top: 2pt; vertical-align: top">
            <div class="TT_-_Table_Text"><a name="1925729">Oracle only. Whether to use the ORDERED hint for the UPDATE of a join. Default is false.</a></div>
          </td>
        </tr>
        <tr>
          <td style="border-bottom-color: #c0d1d1; border-bottom-style: solid; border-bottom-width: 0.15pt; border-top-color: #c0d1d1; border-top-style: solid; border-top-width: 0.15pt; padding-bottom: 2pt; padding-left: 2pt; padding-right: 8pt; padding-top: 2pt; vertical-align: top">
            <div class="TT_-_Table_Text" style="color: #000000; font-family: &quot;Lucida Sans Typewriter&quot;; font-style: normal; font-variant: normal; font-weight: normal; margin-top: 3.0pt; text-transform: none; vertical-align: baseline"><span class="cvt_-_computer_voice_table"><a name="1925731">updatejoinusemergehint</a></span></div>
          </td>
          <td style="border-bottom-color: #c0d1d1; border-bottom-style: solid; border-bottom-width: 0.15pt; border-top-color: #c0d1d1; border-top-style: solid; border-top-width: 0.15pt; padding-bottom: 2pt; padding-left: 2pt; padding-right: 8pt; padding-top: 2pt; vertical-align: top">
            <div class="TT_-_Table_Text"><a name="1925733">Boolean</a></div>
          </td>
          <td style="border-bottom-color: #c0d1d1; border-bottom-style: solid; border-bottom-width: 0.15pt; border-top-color: #c0d1d1; border-top-style: solid; border-top-width: 0.15pt; padding-bottom: 2pt; padding-left: 2pt; padding-right: 8pt; padding-top: 2pt; vertical-align: top">
            <div class="TT_-_Table_Text"><a name="1925735">Oracle only. Whether to use the USE_MERGE hint for the UPDATE of a join. Default is false.</a></div>
          </td>
        </tr>
        <tr>
          <td style="border-bottom-color: #000000; border-bottom-style: solid; border-bottom-width: 0.5pt; border-top-color: #c0d1d1; border-top-style: solid; border-top-width: 0.15pt; padding-bottom: 2pt; padding-left: 2pt; padding-right: 8pt; padding-top: 2pt; vertical-align: top">
            <div class="TT_-_Table_Text" style="color: #000000; font-family: &quot;Lucida Sans Typewriter&quot;; font-style: normal; font-variant: normal; font-weight: normal; margin-top: 3.0pt; text-transform: none; vertical-align: baseline"><span class="cvt_-_computer_voice_table"><a name="1925737">updatejoinusenlhint</a></span></div>
          </td>
          <td style="border-bottom-color: #000000; border-bottom-style: solid; border-bottom-width: 0.5pt; border-top-color: #c0d1d1; border-top-style: solid; border-top-width: 0.15pt; padding-bottom: 2pt; padding-left: 2pt; padding-right: 8pt; padding-top: 2pt; vertical-align: top">
            <div class="TT_-_Table_Text"><a name="1925739">Boolean</a></div>
          </td>
          <td style="border-bottom-color: #000000; border-bottom-style: solid; border-bottom-width: 0.5pt; border-top-color: #c0d1d1; border-top-style: solid; border-top-width: 0.15pt; padding-bottom: 2pt; padding-left: 2pt; padding-right: 8pt; padding-top: 2pt; vertical-align: top">
            <div class="TT_-_Table_Text"><a name="1925741">Oracle only. Whether to use the USE_NL hint for the UPDATE of a join. Default is false.</a></div>
          </td>
        </tr>
      </table>
      <h4 class="H2_-_Heading_2"><a name="1925745">Deferring Creation of Nonessential Indexes</a></h4>
      <div class="B_-_Body"><a name="1925746">You can configure the upgrade to defer creation of nonessential indexes during the upgrade process until the upgrade completes and the application server is online. Nonessential indexes are performance-related indexes that do not enforce constraints. Creation of nonessential indexes can add significant time to the upgrade duration, so it is possible to defer this process. By default, the upgrade does not defer creation of these indexes.</a></div>
      <div class="B_-_Body"><a name="1925750">To configure the upgrade to defer creation of nonessential indexes set the </a><span class="cv_-_computer_voice">defer-create-nonessential-indexes</span> attribute on the <span class="cv_-_computer_voice">&lt;upgrade&gt;</span> element in <span class="cv_-_computer_voice">database-config.xml</span> to <span class="cv_-_computer_voice">true</span>.</div>
      <PRE class="CF_-_Code_First_Line"><a name="1925751">&lt;database ...&gt;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1925752">&nbsp;&nbsp;&lt;upgrade defer-create-nonessential-indexes="true"&gt;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1925753">&nbsp;&nbsp;...</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1925754">&nbsp;&nbsp;&lt;/upgrade&gt;</a></PRE>
      <PRE class="CL_-_Code_Last_Line"><a name="1925755">&lt;/database&gt;</a></PRE>
      <div class="B_-_Body"><a name="1925759">If you opt to defer creation of nonessential indexes, BillingCenter runs the </a><span class="cv_-_computer_voice">DeferredUpgradeTasks</span> batch process as soon as the upgrade completes and the server is completely started. The <span class="cv_-_computer_voice">DeferredUpgradeTasks</span> batch process creates the nonessential performance indexes. The database user must have permission to create indexes until after the <span class="cv_-_computer_voice">DeferredUpgradeTasks</span> batch process is complete.</div>
      <div class="B_-_Body"><a name="1925763">Deferring nonessential index creation can shorten the duration of the upgrade process. The BillingCenter database is then available sooner for tasks including upgrade verification and backing up the upgraded database before the database is opened up for production use. To take advantage of this earlier availability, perform upgrade testing and validation tasks while the </a><span class="cv_-_computer_voice">DeferredUpgradeTasks</span> batch process is running. Do not go into full production while the process is still running. The lack of so many performance-related indexes could likely make the system unusable.</div>
      <div class="B_-_Body"><a name="1925767">Until the </a><span class="cv_-_computer_voice">DeferredUpgradeTasks</span> batch process has run to completion, BillingCenter reports errors during schema validation when starting. These include errors for column-based indexes existing in the data model but not in the physical database and mismatches between the data model and system tables.</div>
      <div class="B_-_Body"><a name="1925769">Check the status of the </a><span class="cv_-_computer_voice">DeferredUpgradeTasks</span> batch process to determine when it has completed successfully. You can find the status of the deferred upgrade in the upgrade logs and on the BillingCenter <span class="ui_-_UI_element">Upgrade Info</span> page. If the <span class="cv_-_computer_voice">DeferredUpgradeTasks</span> batch process fails, manually run the batch process again during non-peak hours.</div>
      <div class="B_-_Body"><a name="1925776">If you do not opt to defer creation of nonessential indexes, BillingCenter creates these indexes as part of the upgrade process that must complete before the application server is online. If you do not want to defer creating nonessential indexes, the </a><span class="cv_-_computer_voice">defer-create-nonessential-indexes</span> attribute on the <span class="cv_-_computer_voice">&lt;upgrade&gt;</span> element in <span class="cv_-_computer_voice">database-config.xml</span> must be set to <span class="cv_-_computer_voice">false</span>. This is the default setting.</div>
      <h4 class="H2_-_Heading_2"><a name="1925794">Configuring the Upgrade on Oracle</a></h4>
      <div class="H3_-_Heading_3_outer" style="margin-left: 36pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <h5 class="H3_-_Heading_3_inner" style="width: 18pt; white-space: nowrap"></h5>
            </td>
            <td width="100%">
              <h5 class="H3_-_Heading_3_inner"><a name="1925795">Configuring Column Removal</a></h5>
            </td>
          </tr>
        </table>
      </div>
      <div class="B_-_Body"><a name="1925796">The database upgrade removes some columns. For Oracle, you can configure whether the removed columns are dropped immediately or are marked as unused. Marking a column as unused is a faster operation than dropping the column immediately. However, because these columns are not physically dropped from the database, the space used by these columns is not released immediately to the table and index segments. You can drop the unused columns after the upgrade during off-peak hours to free the space. Or, you can configure the database upgrade to drop the columns immediately during the upgrade. By default, the BillingCenter database upgrade marks columns as unused.</a></div>
      <div class="B_-_Body"><a name="1925803">To configure the BillingCenter upgrade to drop columns immediately during the upgrade, set the </a><span class="cv_-_computer_voice">deferDropColumns</span> attribute of the <span class="cv_-_computer_voice">&lt;upgrade&gt;</span> block in <span class="cv_-_computer_voice">database-config.xml</span> to <span class="cv_-_computer_voice">false</span>. For example:</div>
      <PRE class="CF_-_Code_First_Line"><a name="1925804">&lt;database ...&gt;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1925805">&nbsp;&nbsp;...</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1925806">&nbsp;&nbsp;&lt;upgrade deferDropColumns="false"&gt;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1925807">&nbsp;&nbsp;&nbsp;&nbsp;...</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1925808">&nbsp;&nbsp;&lt;/upgrade&gt;</a></PRE>
      <PRE class="CL_-_Code_Last_Line"><a name="1925809">&lt;/database&gt;</a></PRE>
      <div class="B_-_Body"><a name="1925810">By default, </a><span class="cv_-_computer_voice">deferDropColumns</span> is <span class="cv_-_computer_voice">true</span>.</div>
      <div class="H3_-_Heading_3_outer" style="margin-left: 36pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <h5 class="H3_-_Heading_3_inner" style="width: 18pt; white-space: nowrap"></h5>
            </td>
            <td width="100%">
              <h5 class="H3_-_Heading_3_inner"><a name="1925812">Configuring Parallel DML and DDL Statement Execution</a></h5>
            </td>
          </tr>
        </table>
      </div>
      <div class="B_-_Body"><a name="1925813">You can configure whether the upgrade executes DML (Data Manipulation Language) and DDL (Data Definition Language) statements in parallel or not and the degree of parallelism to use.</a></div>
      <div class="B_-_Body"><a name="1925814">The </a><span class="cv_-_computer_voice">&lt;upgrade&gt;</span> element includes an <span class="cv_-_computer_voice">ora-parallel-dml</span> attribute. This attribute can be set to <span class="cv_-_computer_voice">disable</span>, <span class="cv_-_computer_voice">enable</span>, or <span class="cv_-_computer_voice">enable_all</span>. The default value is <span class="cv_-_computer_voice">enable</span>. If <span class="cv_-_computer_voice">ora-parallel-dml</span> is set to <span class="cv_-_computer_voice">disable</span>, the upgrade does not conduct parallel execution of DML statements. If <span class="cv_-_computer_voice">ora-parallel-dml</span> is set to <span class="cv_-_computer_voice">enable</span>, the upgrade executes DML statements in parallel if configured or coded for a version trigger. If <span class="cv_-_computer_voice">ora-parallel-dml</span> is set to <span class="cv_-_computer_voice">enable-all</span>, the upgrade executes DML statements in parallel in all cases unless turned off in the code or configuration for a version trigger.</div>
      <div class="B_-_Body"><a name="1925815">The Boolean attribute </a><span class="cv_-_computer_voice">parallel-dml</span> of a <span class="cv_-_computer_voice">&lt;versiontrigger&gt;</span> element controls parallel execution for that version trigger. If <span class="cv_-_computer_voice">parallel-dml</span> is not set, the upgrade executes parallel DML statements if coded or if <span class="cv_-_computer_voice">ora-paralled-dml</span> is set to <span class="cv_-_computer_voice">enable_all</span> on the <span class="cv_-_computer_voice">&lt;upgrade&gt;</span> element. If <span class="cv_-_computer_voice">parallel-dml</span> is set to <span class="cv_-_computer_voice">false</span>, the upgrade does not execute DML statements in parallel. If <span class="cv_-_computer_voice">parallel-dml</span> is set to <span class="cv_-_computer_voice">true</span>, the upgrade executes DML statements in parallel if <span class="cv_-_computer_voice">ora-parallel</span> is set to <span class="cv_-_computer_voice">enable</span> or <span class="cv_-_computer_voice">enable_all</span>.</div>
      <div class="B_-_Body"><a name="1925816">To configure the degree of parallelism for insert, update and delete operations, set the </a><span class="cv_-_computer_voice">degree-of-parallelism</span> attribute on the <span class="cv_-_computer_voice">&lt;upgrade&gt;</span> element. To configure the degree of parallelism for commands such as creating an index and enabling constraints using the alter table command, set the <span class="cv_-_computer_voice">degree-parallel-ddl</span> attribute on the <span class="cv_-_computer_voice">&lt;upgrade&gt;</span> element.</div>
      <div class="B_-_Body"><a name="1925817">You can specify a value from </a><span class="cv_-_computer_voice">2</span> to <span class="cv_-_computer_voice">1000</span> to force that degree of parallelism. Specify a value of <span class="cv_-_computer_voice">1</span> to disable the use of parallel execution.</div>
      <div class="B_-_Body"><a name="1925821">Setting either parameter to </a><span class="cv_-_computer_voice">0</span> configures BillingCenter to defer to Oracle to determine the degree of parallelism for the operations that attribute configures. The Oracle automatic parallel tuning feature determines the degree based on the number of CPUs and the value set for the Oracle parameter <span class="cv_-_computer_voice">PARALLEL_THREADS_PER_CPU</span>. </div>
      <div class="B_-_Body"><a name="1925822">The default for both attributes is </a><span class="cv_-_computer_voice">4</span>.</div>
      <div class="B_-_Body"><a name="1925823">You can configure parallel DML execution on the </a><span class="cv_-_computer_voice">InsertSelectBuilder</span>, <span class="cv_-_computer_voice">BeforeUpgradeUpdateBuilder</span> and <span class="cv_-_computer_voice">BeforeUpgradeInsertSelectBuilder</span> of a custom version trigger using the <span class="cv_-_computer_voice">withParallelDml(</span><span class="ps_-_parameter_in_code_snippets">boolean</span><span class="cv_-_computer_voice">)</span> method. If not explicitly set to <span class="cv_-_computer_voice">true</span> or <span class="cv_-_computer_voice">false</span>, the upgrade uses parallel execution if configured. If set to <span class="cv_-_computer_voice">false</span>, the upgrade does not use parallel execution unless set to <span class="cv_-_computer_voice">true</span> for that version trigger. If set to <span class="cv_-_computer_voice">true</span>, it will be done unless set to false for that version trigger or <span class="cv_-_computer_voice">ora-parallel-dml</span> is set to <span class="cv_-_computer_voice">disable</span>.</div>
      <div class="H3_-_Heading_3_outer" style="margin-left: 36pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <h5 class="H3_-_Heading_3_inner" style="width: 18pt; white-space: nowrap"></h5>
            </td>
            <td width="100%">
              <h5 class="H3_-_Heading_3_inner"><a name="1925824">Collecting Tablespace Usage and Object Size</a></h5>
            </td>
          </tr>
        </table>
      </div>
      <div class="B_-_Body"><a name="1925825">To enable collection of tablespace usage and object size data on Oracle, set the </a><span class="cv_-_computer_voice">collectstorageinstrumentation</span> attribute of the <span class="cv_-_computer_voice">&lt;upgrade&gt;</span> block to <span class="cv_-_computer_voice">true</span>. For example:</div>
      <PRE class="CF_-_Code_First_Line"><a name="1925826">&lt;database ...&gt;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1925827">&nbsp;&nbsp;...</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1925828">&nbsp;&nbsp;&lt;upgrade collectstorageinstrumentation="true"&gt;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1925829">&nbsp;&nbsp;&nbsp;&nbsp;...</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1925830">&nbsp;&nbsp;&lt;/upgrade&gt;</a></PRE>
      <PRE class="CL_-_Code_Last_Line"><a name="1925831">&lt;/database&gt;</a></PRE>
      <div class="B_-_Body"><a name="1925835">A value of </a><span class="cv_-_computer_voice">true</span> enables BillingCenter to collect tablespace usage and size of segments such as tables, indexes and LOBs (large object binaries) before and after the upgrade. The values can then be compared to find the utilization change caused by the upgrade.</div>
      <div class="H3_-_Heading_3_outer" style="margin-left: 36pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <h5 class="H3_-_Heading_3_inner" style="width: 18pt; white-space: nowrap"></h5>
            </td>
            <td width="100%">
              <h5 class="H3_-_Heading_3_inner"><a name="1925836">Disabling Oracle Logging</a></h5>
            </td>
          </tr>
        </table>
      </div>
      <div class="B_-_Body"><a name="1925837">You can disable logging of direct insert and create index operations during the database upgrade by setting </a><span class="cv_-_computer_voice">allowUnloggedOperations</span> to <span class="cv_-_computer_voice">true</span> in the <span class="cv_-_computer_voice">&lt;upgrade&gt;</span> block. For example:</div>
      <PRE class="CF_-_Code_First_Line"><a name="1925838">&lt;database ...&gt;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1925839">&nbsp;&nbsp;...</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1925840">&nbsp;&nbsp;&lt;upgrade allowUnloggedOperations="true"&gt;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1925841">&nbsp;&nbsp;&nbsp;&nbsp;...</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1925842">&nbsp;&nbsp;&lt;/upgrade&gt;</a></PRE>
      <PRE class="CL_-_Code_Last_Line"><a name="1925843">&lt;/database&gt;</a></PRE>
      <div class="B_-_Body"><a name="1925844">Setting </a><span class="cv_-_computer_voice">allowUnloggedOperations</span> to <span class="cv_-_computer_voice">true</span> causes the upgrade to run statements with the <span class="cv_-_computer_voice">NOLOGGING</span> option. </div>
      <div class="B_-_Body"><a name="1925845">Although Guidewire recommends that you backup the database before and after the upgrade, there could be reasons to log all operations. Some examples include Reporting, Disaster Recovery through Standby databases and Oracle Dataguard. To enable logging of direct insert and create index operations, set </a><span class="cv_-_computer_voice">allowUnloggedOperations</span> to <span class="cv_-_computer_voice">false</span>. If not specified, the default value of <span class="cv_-_computer_voice">allowUnloggedOperations</span> is <span class="cv_-_computer_voice">false</span>.</div>
      <div class="H3_-_Heading_3_outer" style="margin-left: 36pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <h5 class="H3_-_Heading_3_inner" style="width: 18pt; white-space: nowrap"></h5>
            </td>
            <td width="100%">
              <h5 class="H3_-_Heading_3_inner"><a name="1925846">Disabling Statistics Update for the Database</a></h5>
            </td>
          </tr>
        </table>
      </div>
      <div class="B_-_Body"><a name="1925847">Generating table statistics during upgrade is optional for Oracle databases. The overall time required to upgrade the database is shorter if the database upgrade does not update statistics. To disable statistics generation during the upgrade, set the </a><span class="cv_-_computer_voice">updatestatistics</span> attribute of the <span class="cv_-_computer_voice">&lt;upgrade&gt;</span> element to <span class="cv_-_computer_voice">false</span>:</div>
      <div class="CS_-_Code_Single_Line"><a name="1925848">&lt;upgrade updatestatistics="false"&gt;</a></div>
      <div class="B_-_Body"><a name="1925849">If </a><span class="cv_-_computer_voice">updatestatistics</span> is <span class="cv_-_computer_voice">true</span>, the upgrade updates statistics and deletes histograms on columns for which BillingCenter does not generate statistics. This setting enables the upgrade to update statistics on changed objects. It also configures BillingCenter to maintain column-level statistics consistent with what is allowed in the code, data model and configuration.</div>
      <div class="B_-_Body"><a name="1925859">If statistics are not updated during the upgrade, BillingCenter reports a warning that recommends that you run the database statistics batch process in incremental mode. Additionally, the </a><span class="ui_-_UI_element">Upgrade Info</span> page shows that statistics were not updated as part of the upgrade. If statistics generation was not disabled, the <span class="ui_-_UI_element">Upgrade Info</span> page reports the runs of the statistics batch process, including incremental runs.</div>
      <div class="B_-_Body"><a name="1925860">You can defer generating database statistics until your next scheduled maintenance window. You do not need to generate database statistics before using the upgraded BillingCenter in a production environment. If you defer generating statistics during the upgrade, Guidewire recommends that you generate full statistics as soon as possible after the upgrade. For instructions, see </a><a href="javascript:WWHClickedPopup('admin', 'database.05.09.html#1199512', '');" title="Commands for Updating Database Statistics">“Commands for Updating Database Statistics” in the </a><span class="bt_-_book_title"><a href="javascript:WWHClickedPopup('admin', 'database.05.09.html#1199512', '');" title="Commands for Updating Database Statistics">System Administration Guide</a></span>.</div>
      <div class="B_-_Body"><a name="1925867">The </a><span class="ui_-_UI_element">Upgrade Info</span> page does not identify the following case: You ran an upgrade with <span class="cv_-_computer_voice">updatestatistics=true</span> after running a previous upgrade with <span class="cv_-_computer_voice">updatestatistics=false</span>, but you did not update statistics first. </div>
      <div class="B_-_Body"><a name="1925868">When you click the </a><span class="ui_-_UI_element">Download</span> button on the <span class="ui_-_UI_element">Upgrade Info</span> page, you get a more detailed report. This report shows the value of the <span class="cv_-_computer_voice">updatestatistics</span> attribute at the time of upgrade. Additionally, the report shows the update statistics SQL statements that were skipped as part of the upgrade. These statements are provided for reference. You typically do not need to review these statements if you run the incremental database statistics process following the upgrade.</div>
      <div class="H3_-_Heading_3_outer" style="margin-left: 36pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <h5 class="H3_-_Heading_3_inner" style="width: 18pt; white-space: nowrap"></h5>
            </td>
            <td width="100%">
              <h5 class="H3_-_Heading_3_inner"><a name="1925869">Disabling Statistics Update for Tables with Locked Statistics</a></h5>
            </td>
          </tr>
        </table>
      </div>
      <div class="B_-_Body"><a name="1925870">If you have tables that have locked statistics, specify to keep statistics on these tables before starting the database upgrade. To specify to keep statistics on a table, set the </a><span class="cv_-_computer_voice">action</span> attribute of the <span class="cv_-_computer_voice">&lt;tablestatistics&gt;</span> element for that table to <span class="cv_-_computer_voice">keep</span>. The <span class="cv_-_computer_voice">&lt;tablestatistics&gt;</span> element is nested within the <span class="cv_-_computer_voice">&lt;databasestatistics&gt;</span> element, which is within the <span class="cv_-_computer_voice">&lt;database&gt;</span> element in <span class="cv_-_computer_voice">database-config.xml</span>.</div>
      <div class="B_-_Body"><a name="1925874">For example, if statistics are locked on </a><span class="cv_-_computer_voice">bc_someTable_EXT</span>, specify a <span class="cv_-_computer_voice">&lt;tablestatistics&gt;</span> element for that table with the <span class="cv_-_computer_voice">action</span> attribute set to <span class="cv_-_computer_voice">keep</span>:</div>
      <PRE class="CF_-_Code_First_Line"><a name="1925875">&lt;database&gt;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1925876">&nbsp;&nbsp;...</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1925877">&nbsp;&nbsp;&lt;databasestatistics&gt;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1925881">&nbsp;&nbsp;&nbsp;&nbsp;</a><span class="s_-_strong">&lt;tablestatistics name="bc_someTable_EXT" action="keep" /&gt;</span></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1925882">&nbsp;&nbsp;&lt;/databasestatistics&gt;</a></PRE>
      <PRE class="CL_-_Code_Last_Line"><a name="1925883">&lt;/database&gt;</a></PRE>
      <h4 class="H2_-_Heading_2"><a name="1925884">Configuring the Upgrade on SQL Server</a></h4>
      <div class="H3_-_Heading_3_outer" style="margin-left: 36pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <h5 class="H3_-_Heading_3_inner" style="width: 18pt; white-space: nowrap"></h5>
            </td>
            <td width="100%">
              <h5 class="H3_-_Heading_3_inner"><a name="1925886">Disabling SQL Server Logging</a></h5>
            </td>
          </tr>
        </table>
      </div>
      <div class="B_-_Body"><a name="1925887">You can disable logging of direct insert and create index operations during the database upgrade by setting </a><span class="cv_-_computer_voice">allowUnloggedOperations</span> to <span class="cv_-_computer_voice">true</span> in the <span class="cv_-_computer_voice">&lt;upgrade&gt;</span> block. For example:</div>
      <PRE class="CF_-_Code_First_Line"><a name="1925888">&lt;database ...&gt;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1925889">&nbsp;&nbsp;...</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1925890">&nbsp;&nbsp;&lt;upgrade allowUnloggedOperations="true"&gt;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1925891">&nbsp;&nbsp;&nbsp;&nbsp;...</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1925892">&nbsp;&nbsp;&lt;/upgrade&gt;</a></PRE>
      <PRE class="CL_-_Code_Last_Line"><a name="1925893">&lt;/database&gt;</a></PRE>
      <div class="B_-_Body"><a name="1925894">Setting </a><span class="cv_-_computer_voice">allowUnloggedOperations</span> to <span class="cv_-_computer_voice">true</span> causes the upgrade to run with minimal logging. This can improve the performance of the upgrade. During the upgrade, set the SQL Server recovery model to Simple or Bulk logged. Once the upgrade and deferred upgrade tasks are complete, you can revert the recovery model setting and back up the full database.</div>
      <div class="B_-_Body"><a name="1925895">Although Guidewire recommends that you backup the database before and after the upgrade, there could be reasons to log all operations. If you require full logging due to the presence of solutions such as Database Mirroring, continue to use the Full recovery model and set </a><span class="cv_-_computer_voice">allowUnloggedOperations</span> to <span class="cv_-_computer_voice">false</span>.</div>
      <div class="B_-_Body"><a name="1925896">To enable logging of direct insert and create index operations, set </a><span class="cv_-_computer_voice">allowUnloggedOperations</span> to <span class="cv_-_computer_voice">false</span>. If not specified, the default value of <span class="cv_-_computer_voice">allowUnloggedOperations</span> is <span class="cv_-_computer_voice">false</span>.</div>
      <div class="H3_-_Heading_3_outer" style="margin-left: 36pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <h5 class="H3_-_Heading_3_inner" style="width: 18pt; white-space: nowrap"></h5>
            </td>
            <td width="100%">
              <h5 class="H3_-_Heading_3_inner"><a name="1925897">Storing Temporary Sort Results in </a><span class="cvh_-_computer_voice_in_heading">tempdb</span></h5>
            </td>
          </tr>
        </table>
      </div>
      <div class="B_-_Body"><a name="1925898">For SQL Server databases, you can specify to store temporary sort results in tempdb by setting the </a><span class="cv_-_computer_voice">sqlserverCreateIndexSortInTempDB</span> attribute of the <span class="cv_-_computer_voice">upgrade</span> block to <span class="cv_-_computer_voice">true</span>. By using tempdb for sort runs, disk input and output is typically faster, and the created indexes tend to be more contiguous. By default, <span class="cv_-_computer_voice">sqlserverCreateIndexSortInTempDB</span> is <span class="cv_-_computer_voice">false</span> and sort runs are stored in the destination filegroup.</div>
      <div class="B_-_Body"><a name="1925899">If you set </a><span class="cv_-_computer_voice">sqlserverCreateIndexSortInTempDB</span> to <span class="cv_-_computer_voice">true</span>, you must have enough disk space available to tempdb for the sort runs, which for the clustered index include the data pages. You must also have sufficient free space in the destination filegroup to store the final index structure, because the new index is created before the old index is deleted. Refer to <span class="cv_-_computer_voice">http://msdn.microsoft.com/en-us/library/ms188281.aspx</span> for details on the requirements to use tempdb for sort results. </div>
      <div class="H3_-_Heading_3_outer" style="margin-left: 36pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <h5 class="H3_-_Heading_3_inner" style="width: 18pt; white-space: nowrap"></h5>
            </td>
            <td width="100%">
              <h5 class="H3_-_Heading_3_inner"><a name="1925900">Specifying Filegroup to Store Sort Results for Clustered Indexes</a></h5>
            </td>
          </tr>
        </table>
      </div>
      <div class="B_-_Body"><a name="1925901">For SQL Server databases, a version trigger recreates non-clustered backing indexes for primary keys as clustered indexes.</a></div>
      <div class="B_-_Body"><a name="1925902">Before recreating the indexes, the version trigger automatically drops (and later rebuilds) any referencing foreign keys and drops any clustered indexes on tables with a primary key.</a></div>
      <div class="B_-_Body"><a name="1925903">If you are using filegroups, the upgrade recreates the clustered index in the OP filegroup. By default, the upgrade also stores the intermediate sort results that are used to build the index in the OP filegroup. You can configure the upgrade to instead use the tempdb filegroup for the intermediate sort results.</a></div>
      <div class="B_-_Body"><a name="1925904">If you want the upgrade to stores the intermediate sort results in the tempbdb filegroup, set the </a><span class="cv_-_computer_voice">sqlserverCreateIndexSortInTempDB</span> attribute of the <span class="cv_-_computer_voice">upgrade</span> element to <span class="cv_-_computer_voice">true</span>.</div>
      <PRE class="CF_-_Code_First_Line"><a name="1925905">&lt;database ...&gt;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1925906">&nbsp;&nbsp;...</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1925907">&nbsp;&nbsp;&lt;upgrade sqlserverCreateIndexSortInTempDB="true" /&gt;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1925908">&nbsp;&nbsp;&nbsp;&nbsp;...</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1925909">&nbsp;&nbsp;&lt;/upgrade&gt;</a></PRE>
      <PRE class="CL_-_Code_Last_Line"><a name="1925910">&lt;/database&gt;</a></PRE>
      <div class="B_-_Body"><a name="1925911">This option increases the amount of temporary disk space that is used to create an index. However, it might reduce the time that is required to create or rebuild an index when tempdb is on a different set of disks from that of the user database.</a></div>
      <div class="B_-_Body"><a name="1925912">By default, </a><span class="cv_-_computer_voice">sqlserverCreateIndexSortInTempDB</span> is <span class="cv_-_computer_voice">false</span>.</div>
      <h4 class="H2_-_Heading_2"><a name="1845518">Downloading Database Upgrade Instrumentation Details</a></h4>
      <div class="B_-_Body"><a name="1845519">The database upgrade deletes upgrade instrumentation information for prior database upgrades. If the database upgrade detects any prior upgrade instrumentation data, it reports a warning and deletes the data. If you have run previous database upgrades, and you want to preserve upgrade instrumentation details, follow the procedure in </a><a href="javascript:WWHClickedPopup('upgrade', 'procedure-db-d.12.22.html#1857954', '');" title="Viewing Detailed Database Upgrade Information">“Viewing Detailed Database Upgrade Information”</a>.</div>
      <script type="text/javascript" language="JavaScript1.2">
        <!--
          // Clear related topics
          //
          WWHClearRelatedTopics();

          document.writeln(WWHRelatedTopicsInlineHTML());
        // -->
      </script>
    </blockquote>
    <script type="text/javascript" language="JavaScript1.2">
      <!--
        document.write(WWHRelatedTopicsDivTag() + WWHPopupDivTag() + WWHALinksDivTag());
      // -->
    </script>
  </body>
</html>
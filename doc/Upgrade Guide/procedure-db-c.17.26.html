<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xml:lang="en" lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
    <meta http-equiv="Content-Style-Type" content="text/css" />
    <!-- MOTW-DISABLED saved from url=(0014)about:internet -->
    <title>Final Steps After The Database Upgrade is Complete</title>
    <link rel="StyleSheet" href="css/procedure-db-c.css" type="text/css" media="all" />
    <link rel="StyleSheet" href="css/webworks.css" type="text/css" media="all" />
    <link rel="StyleSheet" href="css/css-guidewire-extra.css" type="text/css" media="all" />
    <script type="text/javascript" language="JavaScript1.2" src="wwhdata/common/context.js"></script>
    <script type="text/javascript" language="JavaScript1.2" src="wwhdata/common/towwhdir.js"></script>
    <script type="text/javascript" language="JavaScript1.2" src="wwhdata/common/wwhpagef.js"></script>
    <script type="text/javascript" language="JavaScript1.2">
      <!--
        var  WebWorksRootPath = "";
      // -->
    </script>
    <script type="text/javascript" language="JavaScript1.2">
      <!--
        // Set reference to top level help frame
        //
        var  WWHFrame = WWHGetWWHFrame("", true);
      // -->
    </script>
    <script type="text/javascript" language="JavaScript1.2" src="scripts/expand.js"></script>
    <!-- THE FOLLOWING IS A GUIDEWIRE STYLE DEFINITION FOR THE LINK TO THIS FEATURE -->
    <link rel="StyleSheet" href="css/css-guidewire-extra.css" type="text/css" media="all" />
    <!-- THE FOLLOWING IS A GUIDEWIRE GSCRIPT FUNCTION FOR THE LINK TO THIS FEATURE -->
    <script type="text/javascript">
function guidewire_selectall()
{
var text_val=eval("document.linktothisurlform.urlfield");
text_val.focus();
text_val.select();
}
</script>
  </head>
  <body onLoad="WWHUpdate();" onUnload="WWHUnload();" onKeyDown="WWHHandleKeyDown((document.all||document.getElementById||document.layers)?event:null);" onKeyPress="WWHHandleKeyPress((document.all||document.getElementById||document.layers)?event:null);" onKeyUp="WWHHandleKeyUp((document.all||document.getElementById||document.layers)?event:null);">
    <!-- THE FOLLOWING IS A GUIDEWIRE DIV FOR THE 'LINK TO THIS' FEATURE -->
    <div id="linkToThisPage" class="popup" style="display: none;">
      <div class="popupTitle">Link Directly to This Page 
           <a href="#" onclick="var thePopup = getElementById('linkToThisPage');thePopup.style.display='none';return false;"><img class="popupClosebox" src="wwhelp/wwhimpl/common/images/close.gif" /></a></div>
      <div style="padding:6px;">
        <div class="popupText" id="linkToThisPageBookmark">An error has occurred if you see this messsage.</div>
        <form name="linktothisurlform" method="post" action="" style="width:275px;margin:0px">
          <input type="text" class="popupURLText" id="linkToThisPageURL" name="urlfield" rows="1" cols="55" onClick="guidewire_selectall();" onFocus="guidewire_selectall();"></input>
        </form>
      </div>
    </div>
    <br />
    <div class="WebWorks_Breadcrumbs" style="text-align: left;">
      <span>BillingCenter Upgrade Guide</span> : 
    <span class="WebWorks_Breadcrumbs" style="text-align: left;"><a class="WebWorks_Breadcrumb_Link" href="part-basicupgrade_2.html#1840102">Upgrading from 3.0.x</a> : <a class="WebWorks_Breadcrumb_Link" href="procedure-db-c.17.01.html#1840102">Upgrading the BillingCenter 3.0.x Database</a> : Final Steps After The Database Upgrade is Complete</span></div>
    <hr align="left" />
    <blockquote>
      <h3 class="H1_-_Heading_1"><a name="1840102">Final Steps After The Database Upgrade is Complete</a></h3>
      <div class="BKN_-_Body_002c_Keep_Next"><a name="1840097">This section describes procedures to run after you have completed the upgrade procedure and migration of configurations and integrations. The processes and checks in this section provide you with a benchmark of the upgraded system. Completing these steps is particularly important to going live in a production environment.</a></div>
      <div class="B_-_Body"><a name="1673972">Use these procedures to revalidate the database:</a></div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a href="javascript:WWHClickedPopup('upgrade', 'procedure-db-c.17.06.html#1993608', '');" title="Validating the Database Schema" name="1500465">Validating the Database Schema</a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a href="javascript:WWHClickedPopup('upgrade', 'procedure-db-c.17.07.html#1993619', '');" title="Checking Database Consistency" name="1500469">Checking Database Consistency</a> including <a href="javascript:WWHClickedPopup('upgrade', 'procedure-db-c.17.26.html#1940313', '');" title="Final Steps After The Database Upgrade is Complete">Checking that Contacts Have Unique Addresses</a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a href="javascript:WWHClickedPopup('upgrade', 'procedure-db-c.17.08.html#1994544', '');" title="Creating a Data Distribution Report" name="1793806">Creating a Data Distribution Report</a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a href="javascript:WWHClickedPopup('upgrade', 'procedure-db-c.17.09.html#1993805', '');" title="Generating Database Statistics" name="1500473">Generating Database Statistics</a>. You can defer generating database statistics until your next scheduled maintenance window. You do not need to generate database statistics before using the upgraded BillingCenter in a production environment.</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a href="javascript:WWHClickedPopup('upgrade', 'procedure-db-c.17.26.html#1955851', '');" title="Final Steps After The Database Upgrade is Complete" name="1786329">Reenabling Database Logging</a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a href="javascript:WWHClickedPopup('upgrade', 'procedure-db-c.17.26.html#1955144', '');" title="Final Steps After The Database Upgrade is Complete" name="1955489">Backing up the Database After Upgrade</a></div>
            </td>
          </tr>
        </table>
      </div>
      <h4 class="H2_-_Heading_2"><a name="1940313">Checking that Contacts Have Unique Addresses</a></h4>
      <div class="B_-_Body"><a name="1940317">An </a><span class="cv_-_computer_voice">Address</span> cannot be shared by more than one <span class="cv_-_computer_voice">Contact</span>. BillingCenter 8.0 includes a commit-time check that does not allow a shared reference to an address instance even when one of the referring <span class="cv_-_computer_voice">Contact</span> or <span class="cv_-_computer_voice">ContactAddress</span> instances is retired. If you have multiple contacts at the same address, you can create separate address instances with the same field values.</div>
      <div class="B_-_Body"><a name="1940318">A database consistency check on the </a><span class="cv_-_computer_voice">Contact</span> entity reports an error if it detects multiple <span class="cv_-_computer_voice">Contact</span> records using the same <span class="cv_-_computer_voice">PrimaryAddress</span>.</div>
      <div class="B_-_Body"><a name="1940325">Before using BillingCenter 8.0.4 in production, run database consistency checks to find any instances of shared references to address instances. If the consistency check reports shared addresses, contact Guidewire Support for assistance fixing your database.</a></div>
      <h4 class="H2_-_Heading_2"><a name="1933739">Completing Deferred Upgrade</a></h4>
      <div class="B_-_Body"><a name="1933763">If you have archiving enabled, and you did not set </a><span class="cv_-_computer_voice">deferCreateArchiveIndexes</span> to <span class="cv_-_computer_voice">false</span>, run the <span class="cv_-_computer_voice">Deferred Upgrade Tasks</span> batch process as soon as possible after the completion of the upgrade. To run the <span class="cv_-_computer_voice">Deferred Upgrade Tasks</span> batch process, use the <span class="cv_-_computer_voice">admin/bin/maintenance_tools</span> command:</div>
      <div class="CS_-_Code_Single_Line"><a name="1933764">maintenance_tools -password </a><span class="pc_-_parameter_in_code">password</span> -startprocess deferredupgradetasks</div>
      <h4 class="H2_-_Heading_2"><a name="1955851">Reenabling Database Logging</a></h4>
      <div class="B_-_Body"><a name="1955852">You might have disabled logging of direct insert and create index operations during the database upgrade. After you complete the database upgrade successfully, you can reenable logging by setting </a><span class="cv_-_computer_voice">allowUnloggedOperations</span> to <span class="cv_-_computer_voice">false</span> in the <span class="cv_-_computer_voice">&lt;upgrade&gt;</span> block. For example:</div>
      <PRE class="CF_-_Code_First_Line"><a name="1955853">&lt;database ...&gt;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1955854">&nbsp;&nbsp;...</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1955855">&nbsp;&nbsp;&lt;upgrade allowUnloggedOperations="false"&gt;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1955856">&nbsp;&nbsp;&nbsp;&nbsp;...</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1955857">&nbsp;&nbsp;&lt;/upgrade&gt;</a></PRE>
      <PRE class="CL_-_Code_Last_Line"><a name="1955858">&lt;/database&gt;</a></PRE>
      <div class="B_-_Body"><a name="1955859">For SQL Server, if you changed the recovery model from Full to Simple or Bulk logged during the upgrade, you can revert the recovery model. If you deferred migrating to 64-bit IDs, you might disable logging again when you perform the migration. </a></div>
      <h4 class="H2_-_Heading_2"><a name="1955153">Migrating to 64-bit IDs After Upgrade (SQL Server Only)</a></h4>
      <div class="B_-_Body"><a name="1955154">If you did not change the </a><span class="cv_-_computer_voice">MigrateToLargeIDsAndDatetime2</span> parameter to <span class="cv_-_computer_voice">true</span> before the upgrade, complete the migration to 64-bit primary key and foreign key identifiers after the upgrade. This ensures that there are enough unique identifiers available for BillingCenter.</div>
      <h6 class="HS_-_Head_Sub"><a name="1955158">To migrate primary key and foreign key identifiers and date columns after the upgrade</a></h6>
      <div class="LS_-_List_Start_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="LS_-_List_Start_inner" style="width: 15pt; white-space: nowrap">
                <span class="ri_-_run_in_header">	1.	</span>
              </div>
            </td>
            <td width="100%">
              <div class="LS_-_List_Start_inner"><a name="1955180">Open Studio for BillingCenter 8.0.4.</a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="LI_-_List_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="LI_-_List_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="ri_-_run_in_header">	2.	</span>
              </div>
            </td>
            <td width="100%">
              <div class="LI_-_List_Item_inner"><a name="1955187">Open </a><span class="ui_-_UI_element">configuration</span> <span class="cv_-_computer_voice">→ </span><span class="ui_-_UI_element">config</span><span class="cv_-_computer_voice"> → </span><span class="ui_-_UI_element">config.xml</span>.</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="LI_-_List_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="LI_-_List_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="ri_-_run_in_header">	3.	</span>
              </div>
            </td>
            <td width="100%">
              <div class="LI_-_List_Item_inner"><a name="1955188">Change the </a><span class="cv_-_computer_voice">value</span> of the <span class="cv_-_computer_voice">MigrateToLargeIDsAndDatetime2</span> parameter to <span class="cv_-_computer_voice">true</span>.</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="LI_-_List_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="LI_-_List_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="ri_-_run_in_header">	4.	</span>
              </div>
            </td>
            <td width="100%">
              <div class="LI_-_List_Item_inner"><a name="1955189">Save your changes. </a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="LI_-_List_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="LI_-_List_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="ri_-_run_in_header">	5.	</span>
              </div>
            </td>
            <td width="100%">
              <div class="LI_-_List_Item_inner"><a name="1955196">Open </a><span class="ui_-_UI_element">configuration</span> <span class="cv_-_computer_voice">→ </span><span class="ui_-_UI_element">config</span><span class="cv_-_computer_voice"> → </span><span class="ui_-_UI_element">database-config.xml</span>.</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="LI_-_List_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="LI_-_List_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="ri_-_run_in_header">	6.	</span>
              </div>
            </td>
            <td width="100%">
              <div class="LI_-_List_Item_inner"><a name="1955198">Add the </a><span class="cv_-_computer_voice">allowUnloggedOperations</span> attribute to the <span class="cv_-_computer_voice">upgrade</span> element if you have not already added it. </div>
            </td>
          </tr>
        </table>
      </div>
      <div class="CS_-_Code_Single_Line"><a name="1955199">&lt;upgrade allowUnloggedOperations="true" ... /&gt;</a></div>
      <div class="LP_-_List_Para"><a name="1955200">If you do not require full logging, set </a><span class="cv_-_computer_voice">allowUnloggedOperations</span> to <span class="cv_-_computer_voice">true</span> to improve performance of the conversion. Set the SQL Server recovery model to Simple or Bulk logged during the migration.</div>
      <div class="LP_-_List_Para"><a name="1955201">If you do require full logging due to the presence of solutions such as Database Mirroring, continue to use the Full recovery model and set </a><span class="cv_-_computer_voice">allowUnloggedOperations</span> to <span class="cv_-_computer_voice">false</span>.</div>
      <div class="LP_-_List_Para"><a name="1955205">See </a><a href="javascript:WWHClickedPopup('upgrade', 'procedure-db-c.17.17.html#1994854', '');" title="Configuring the Database Upgrade">“Disabling SQL Server Logging”</a>.</div>
      <div class="LI_-_List_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="LI_-_List_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="ri_-_run_in_header">	7.	</span>
              </div>
            </td>
            <td width="100%">
              <div class="LI_-_List_Item_inner"><a name="1955206">Save your changes.</a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="LI_-_List_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="LI_-_List_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="ri_-_run_in_header">	8.	</span>
              </div>
            </td>
            <td width="100%">
              <div class="LI_-_List_Item_inner"><a name="1955213">Start the BillingCenter server. BillingCenter performs the migration to 64-bit </a><span class="cv_-_computer_voice">BIGINT</span> identifiers and <span class="cv_-_computer_voice">datetime2</span> date columns.</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="LI_-_List_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="LI_-_List_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="ri_-_run_in_header">	9.	</span>
              </div>
            </td>
            <td width="100%">
              <div class="LI_-_List_Item_inner"><a name="1955217">Revert the SQL Server recovery model if you changed it in </a><a href="javascript:WWHClickedPopup('upgrade', 'procedure-db-c.17.26.html#1955198', '');" title="Final Steps After The Database Upgrade is Complete">step 6</a>.</div>
            </td>
          </tr>
        </table>
      </div>
      <h4 class="H2_-_Heading_2"><a name="1955144">Backing up the Database After Upgrade</a></h4>
      <div class="B_-_Body"><a name="1500507">Finally, before going live, back up the upgraded database. This provides you with a snapshot of the initial upgraded data set, if an unanticipated event occurs just after going live.</a></div>
      <script type="text/javascript" language="JavaScript1.2">
        <!--
          // Clear related topics
          //
          WWHClearRelatedTopics();

          document.writeln(WWHRelatedTopicsInlineHTML());
        // -->
      </script>
    </blockquote>
    <script type="text/javascript" language="JavaScript1.2">
      <!--
        document.write(WWHRelatedTopicsDivTag() + WWHPopupDivTag() + WWHALinksDivTag());
      // -->
    </script>
  </body>
</html>
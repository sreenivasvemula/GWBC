<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xml:lang="en" lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
    <meta http-equiv="Content-Style-Type" content="text/css" />
    <!-- MOTW-DISABLED saved from url=(0014)about:internet -->
    <title>Guidewire Profiler: Tags, Frames, and Stacks</title>
    <link rel="StyleSheet" href="css/tools-server.css" type="text/css" media="all" />
    <link rel="StyleSheet" href="css/webworks.css" type="text/css" media="all" />
    <link rel="StyleSheet" href="css/css-guidewire-extra.css" type="text/css" media="all" />
    <script type="text/javascript" language="JavaScript1.2" src="wwhdata/common/context.js"></script>
    <script type="text/javascript" language="JavaScript1.2" src="wwhdata/common/towwhdir.js"></script>
    <script type="text/javascript" language="JavaScript1.2" src="wwhdata/common/wwhpagef.js"></script>
    <script type="text/javascript" language="JavaScript1.2">
      <!--
        var  WebWorksRootPath = "";
      // -->
    </script>
    <script type="text/javascript" language="JavaScript1.2">
      <!--
        // Set reference to top level help frame
        //
        var  WWHFrame = WWHGetWWHFrame("", true);
      // -->
    </script>
    <script type="text/javascript" language="JavaScript1.2" src="scripts/expand.js"></script>
    <!-- THE FOLLOWING IS A GUIDEWIRE STYLE DEFINITION FOR THE LINK TO THIS FEATURE -->
    <link rel="StyleSheet" href="css/css-guidewire-extra.css" type="text/css" media="all" />
    <!-- THE FOLLOWING IS A GUIDEWIRE GSCRIPT FUNCTION FOR THE LINK TO THIS FEATURE -->
    <script type="text/javascript">
function guidewire_selectall()
{
var text_val=eval("document.linktothisurlform.urlfield");
text_val.focus();
text_val.select();
}
</script>
  </head>
  <body onLoad="WWHUpdate();" onUnload="WWHUnload();" onKeyDown="WWHHandleKeyDown((document.all||document.getElementById||document.layers)?event:null);" onKeyPress="WWHHandleKeyPress((document.all||document.getElementById||document.layers)?event:null);" onKeyUp="WWHHandleKeyUp((document.all||document.getElementById||document.layers)?event:null);">
    <!-- THE FOLLOWING IS A GUIDEWIRE DIV FOR THE 'LINK TO THIS' FEATURE -->
    <div id="linkToThisPage" class="popup" style="display: none;">
      <div class="popupTitle">Link Directly to This Page 
           <a href="#" onclick="var thePopup = getElementById('linkToThisPage');thePopup.style.display='none';return false;"><img class="popupClosebox" src="wwhelp/wwhimpl/common/images/close.gif" /></a></div>
      <div style="padding:6px;">
        <div class="popupText" id="linkToThisPageBookmark">An error has occurred if you see this messsage.</div>
        <form name="linktothisurlform" method="post" action="" style="width:275px;margin:0px">
          <input type="text" class="popupURLText" id="linkToThisPageURL" name="urlfield" rows="1" cols="55" onClick="guidewire_selectall();" onFocus="guidewire_selectall();"></input>
        </form>
      </div>
    </div>
    <br />
    <div class="WebWorks_Breadcrumbs" style="text-align: left;">
      <span>BillingCenter System Administration Guide</span> : 
    <span class="WebWorks_Breadcrumbs" style="text-align: left;"><a class="WebWorks_Breadcrumb_Link" href="tools-server.13.01.html#1964805">Using BillingCenter Server Tools</a> : <a class="WebWorks_Breadcrumb_Link" href="tools-server.13.32.html#1964805">Guidewire Profiler</a> : Guidewire Profiler: Tags, Frames, and Stacks</span></div>
    <hr align="left" />
    <blockquote>
      <h4 class="H2B_-_Heading_2_Break"><a name="1964805">Guidewire Profiler: Tags, Frames, and Stacks</a></h4>
      <div class="B_-_Body"><a name="1964806">The following sample code introduces key concepts for understanding Guidewire Profiler:</a></div>
      <div class="B_-_Body"><a name="1964568">In </a><span class="cv_-_computer_voice">ProfilerTag.java</span>:</div>
      <div class="CS_-_Code_Single_Line"><a name="1964569">ProfilerTag MYTAG = new ProfilerTag("MyTag");</a></div>
      <div class="B_-_Body"><a name="1964570">In </a><span class="cv_-_computer_voice">MyCode.java</span>:</div>
      <PRE class="CF_-_Code_First_Line"><a name="1964571">import gw.api.profiler.Profiler;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1964572">ProfilerFrame frame = Profiler.push(ProfilerTag.MYTAG);</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1964573">try {</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1964574">&nbsp;&nbsp;myMethod(str);</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1964575">} finally {</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1964576">&nbsp;&nbsp;&nbsp;&nbsp;Profiler.pop(frame);</a></PRE>
      <PRE class="CL_-_Code_Last_Line"><a name="1964577">}</a></PRE>
      <div class="H3_-_Heading_3_outer" style="margin-left: 36pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <h5 class="H3_-_Heading_3_inner" style="width: 18pt; white-space: nowrap"></h5>
            </td>
            <td width="100%">
              <h5 class="H3_-_Heading_3_inner"><a name="1964578">Profiler Tags</a></h5>
            </td>
          </tr>
        </table>
      </div>
      <div class="B_-_Body"><a name="1964579">Profiler tags represents sections of code that Guidewire Profiler can profile. A profiler tag is an alias for a piece of code in the Guidewire application for which you want to gather performance information.</a></div>
      <div class="B_-_Body"><a name="1964580">The code represents Profiler tags by instances of the </a><span class="cv_-_computer_voice">gw.api.profiler.ProfilerTag</span> class. The constructor for the <span class="cv_-_computer_voice">ProfilerTag</span> takes a <span class="cv_-_computer_voice">String</span> parameter defining the <span class="cv_-_computer_voice">ProfilerTag</span> name. In this example, the profiler tag has the name <span class="cv_-_computer_voice">MyTag</span> and corresponds to the code invoked by the method <span class="cv_-_computer_voice">myMethod</span>.</div>
      <div class="B_-_Body"><a name="1964581">It is better to create a static final </a><span class="cv_-_computer_voice">ProfilerTag</span> and preserve it, rather than create one each time you need it. Creating the tag incurs some slight performance cost.</div>
      <div class="H3_-_Heading_3_outer" style="margin-left: 36pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <h5 class="H3_-_Heading_3_inner" style="width: 18pt; white-space: nowrap"></h5>
            </td>
            <td width="100%">
              <h5 class="H3_-_Heading_3_inner"><a name="1964583">Profiler Frames</a></h5>
            </td>
          </tr>
        </table>
      </div>
      <div class="BKN_-_Body_002c_Keep_Next"><a name="1964584">A profiler frame contains information corresponding to a specific invocation of profiled code, such as its start and finish times. </a></div>
      <div class="BKN_-_Body_002c_Keep_Next"><a name="1964585">In each Profiler session:</a></div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a name="1964586">Whenever the code calls </a><span class="cv_-_computer_voice">push()</span> on the profiler stack, Guidewire Profiler creates a profiler frame and pushes the frame onto the stack. </div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a name="1964587">Whenever the code calls </a><span class="cv_-_computer_voice">pop()</span> on the profiler stack, Guidewire Profiler removes the profiler frame from the stack. The Profiler continues to stores the frame information, however, so as to make the information available for future examination. </div>
            </td>
          </tr>
        </table>
      </div>
      <div class="B_-_Body"><a name="1964588">The code represents Profiler frames by instances of </a><span class="cv_-_computer_voice">gw.api.profiler.ProfilerFrame</span>.</div>
      <div class="H3_-_Heading_3_outer" style="margin-left: 36pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <h5 class="H3_-_Heading_3_inner" style="width: 18pt; white-space: nowrap"></h5>
            </td>
            <td width="100%">
              <h5 class="H3_-_Heading_3_inner"><a name="1964599">Properties and Counters on a Frame</a></h5>
            </td>
          </tr>
        </table>
      </div>
      <div class="B_-_Body"><a name="1964600">Profiler frames can hold user-defined properties and counters that provide more information about system events. Consider this example: </a></div>
      <PRE class="CF_-_Code_First_Line"><a name="1964601">frame.setPropertyValue("PARAMETER", str);</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1964602">int ret = myMethod(str);</a></PRE>
      <PRE class="CL_-_Code_Last_Line"><a name="1964603">frame.setCounterValue("RETURN", ret);</a></PRE>
      <div class="B_-_Body"><a name="1964604">After the coder pops a profiler frame off the stack, the frame contains information about which parameter was passed to </a><span class="cv_-_computer_voice">myMethod()</span> and the return value. Currently, properties and counters are used, among other things, to record SQL being executed, parameters to that SQL, row count returned, which rule is being executed, and so forth.</div>
      <div class="N_-_Note">
        <span class="n_-_note">Note: </span><a name="1964605">Exercise care when using this feature. Storing too much information will cause the display to become too cluttered, require more space for storage and, for long-running processes, hold on to too much memory at runtime.</a></div>
      <div class="H3_-_Heading_3_outer" style="margin-left: 36pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <h5 class="H3_-_Heading_3_inner" style="width: 18pt; white-space: nowrap"></h5>
            </td>
            <td width="100%">
              <h5 class="H3_-_Heading_3_inner"><a name="1964838">Profiler Stacks</a></h5>
            </td>
          </tr>
        </table>
      </div>
      <div class="B_-_Body"><a name="1964839">A profiler stack stores profiling information for a specific thread. A profiler stack implements the standard </a><span class="cv_-_computer_voice">push()</span> and <span class="cv_-_computer_voice">pop()</span> functionality of a stack. The <span class="cv_-_computer_voice">push</span> and <span class="cv_-_computer_voice">pop</span> actions correspond to the beginning and end, respectively, of a piece of code represented by a profiler tag. Thus, at any time, the current contents of the profiler stack reflect all profiler tags whose code is currently being executed. The code represents Profiler stacks by instances of <span class="cv_-_computer_voice">gw.api.profiler.ProfilerStack</span>.</div>
      <div class="B_-_Body"><a name="1964840">If a profiler stack has been initialized for the current thread, the call to </a><span class="cv_-_computer_voice">Profiler.push(ProfilerTag.MYTAG)</span> pushes a new frame with tag <span class="cv_-_computer_voice">MYTAG</span> on to that profiler stack. Otherwise, the call has no effect.</div>
      <div class="B_-_Body"><a name="1964841">Similarly, </a><span class="cv_-_computer_voice">Profiler.pop(frame)</span> is just a pass-through to calling <span class="cv_-_computer_voice">pop()</span> on the profiler stack of the current thread.</div>
      <script type="text/javascript" language="JavaScript1.2">
        <!--
          // Clear related topics
          //
          WWHClearRelatedTopics();

          document.writeln(WWHRelatedTopicsInlineHTML());
        // -->
      </script>
    </blockquote>
    <script type="text/javascript" language="JavaScript1.2">
      <!--
        document.write(WWHRelatedTopicsDivTag() + WWHPopupDivTag() + WWHALinksDivTag());
      // -->
    </script>
  </body>
</html>
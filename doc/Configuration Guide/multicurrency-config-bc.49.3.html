<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xml:lang="en" lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
    <meta http-equiv="Content-Style-Type" content="text/css" />
    <!-- MOTW-DISABLED saved from url=(0014)about:internet -->
    <title>Configuring BillingCenter with Multiple Currencies</title>
    <link rel="StyleSheet" href="css/multicurrency-config-bc.css" type="text/css" media="all" />
    <link rel="StyleSheet" href="css/webworks.css" type="text/css" media="all" />
    <link rel="StyleSheet" href="css/css-guidewire-extra.css" type="text/css" media="all" />
    <script type="text/javascript" language="JavaScript1.2" src="wwhdata/common/context.js"></script>
    <script type="text/javascript" language="JavaScript1.2" src="wwhdata/common/towwhdir.js"></script>
    <script type="text/javascript" language="JavaScript1.2" src="wwhdata/common/wwhpagef.js"></script>
    <script type="text/javascript" language="JavaScript1.2">
      <!--
        var  WebWorksRootPath = "";
      // -->
    </script>
    <script type="text/javascript" language="JavaScript1.2">
      <!--
        // Set reference to top level help frame
        //
        var  WWHFrame = WWHGetWWHFrame("", true);
      // -->
    </script>
    <script type="text/javascript" language="JavaScript1.2" src="scripts/expand.js"></script>
    <!-- THE FOLLOWING IS A GUIDEWIRE STYLE DEFINITION FOR THE LINK TO THIS FEATURE -->
    <link rel="StyleSheet" href="css/css-guidewire-extra.css" type="text/css" media="all" />
    <!-- THE FOLLOWING IS A GUIDEWIRE GSCRIPT FUNCTION FOR THE LINK TO THIS FEATURE -->
    <script type="text/javascript">
function guidewire_selectall()
{
var text_val=eval("document.linktothisurlform.urlfield");
text_val.focus();
text_val.select();
}
</script>
  </head>
  <body onLoad="WWHUpdate();" onUnload="WWHUnload();" onKeyDown="WWHHandleKeyDown((document.all||document.getElementById||document.layers)?event:null);" onKeyPress="WWHHandleKeyPress((document.all||document.getElementById||document.layers)?event:null);" onKeyUp="WWHHandleKeyUp((document.all||document.getElementById||document.layers)?event:null);">
    <!-- THE FOLLOWING IS A GUIDEWIRE DIV FOR THE 'LINK TO THIS' FEATURE -->
    <div id="linkToThisPage" class="popup" style="display: none;">
      <div class="popupTitle">Link Directly to This Page 
           <a href="#" onclick="var thePopup = getElementById('linkToThisPage');thePopup.style.display='none';return false;"><img class="popupClosebox" src="wwhelp/wwhimpl/common/images/close.gif" /></a></div>
      <div style="padding:6px;">
        <div class="popupText" id="linkToThisPageBookmark">An error has occurred if you see this messsage.</div>
        <form name="linktothisurlform" method="post" action="" style="width:275px;margin:0px">
          <input type="text" class="popupURLText" id="linkToThisPageURL" name="urlfield" rows="1" cols="55" onClick="guidewire_selectall();" onFocus="guidewire_selectall();"></input>
        </form>
      </div>
    </div>
    <br />
    <div class="WebWorks_Breadcrumbs" style="text-align: left;">
      <span>BillingCenter Configuration Guide</span> : 
    <span class="WebWorks_Breadcrumbs" style="text-align: left;"><a class="WebWorks_Breadcrumb_Link" href="p-BillingCenter.html#1153960">Guidewire BillingCenter Configuration</a> : <a class="WebWorks_Breadcrumb_Link" href="multicurrency-config-bc.49.1.html#1153960">Configuring Multicurrency</a> : Configuring BillingCenter with Multiple Currencies</span></div>
    <hr align="left" />
    <blockquote>
      <h3 class="H1_-_Heading_1"><a name="1153960">Configuring BillingCenter with Multiple Currencies</a></h3>
      <div class="B_-_Body"><a name="1145935">To configure BillingCenter to use multiple currencies, set the default application currency and the multicurrency display mode parameters in </a><span class="cv_-_computer_voice">config.xml</span>. The default currency populates the <span class="cv_-_computer_voice">Currency</span> property for new accounts and producers unless you explicitly specify another currency.</div>
      <div class="B_-_Body"><a name="1154045">For details see:</a></div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a href="javascript:WWHClickedPopup('global', 'currency.20.7.html#2898833', '');" title="Setting the Default Application Currency" name="1154049">“Setting the Default Application Currency” in the </a><span class="bt_-_book_title"><a href="javascript:WWHClickedPopup('global', 'currency.20.7.html#2898833', '');" title="Setting the Default Application Currency">Globalization Guide</a></span> </div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a href="javascript:WWHClickedPopup('global', 'currency.20.6.html#2897798', '');" title="Currency-related Configuration Parameters" name="1154053">“Currency-related Configuration Parameters” in the </a><span class="bt_-_book_title"><a href="javascript:WWHClickedPopup('global', 'currency.20.6.html#2897798', '');" title="Currency-related Configuration Parameters">Globalization Guide</a></span></div>
            </td>
          </tr>
        </table>
      </div>
      <h4 class="H2_-_Heading_2"><a name="1147710">Currency Silos</a></h4>
      <div class="B_-_Body"><a name="1150512">You can use multiple currencies in the same instance of BillingCenter, but each financial entity and all of its related entities must share the same currency. BillingCenter never transfers or converts money from one currency to another. BillingCenter never compares two monetary amounts in different currencies.</a></div>
      <div class="B_-_Body"><a name="1155255">One way to keep currencies separate is to use separate databases and separate instance of BillingCenter. This approach is too restrictive. </a></div>
      <div class="B_-_Body"><a name="1155256">Instead, BillingCenter prevents monetary amounts in different currencies from mixing by allowing each entity to use only one currency. Then BillingCenter allows connections between entities only if the entities use the same currency. </a></div>
      <div class="B_-_Body"><a name="1155291">In multicurrency mode, BillingCenter behaves essentially like multiple separate single-currency instances that share different parts of the same database. Rather than require a separate database for each currency, BillingCenter simulates separate database instances for each currency with </a><span class="e_-_emphasis">currency silos</span>.</div>
      <div class="B_-_Body"><a name="1151759">Currency silos create barriers that prevent the co-mingling of currencies at the database level. Each currency has a silo. Entities in one currency silo can only be associated with other entities in the same silo. A transaction can not interact with entities in more than one silo. Currency silos are like virtual databases within the single BillingCenter instance.</a></div>
      <div class="B_-_Body"><a name="1148820">There are a few exceptions to the restriction that entities can only associate with other entities in the same silo. BillingCenter does allow some associations across currency silos. For example, a parent account can have an assigned currency that is different from any of its child accounts. You can model a policyholder with policies in multiple different currencies using a parent account with a child account owner for each currency.</a></div>
      <div class="B_-_Body"><a name="1148935">Similarly, a producer has an assigned currency and all associated plans and policies must share the same currency as the producer. To model a producer that handles policies in multiple currencies you must create a separate BillingCenter producer for each currency.</a></div>
      <h4 class="H2_-_Heading_2"><a name="1152534">Multicurrency Delegates</a></h4>
      <div class="B_-_Body"><a name="1152535">All financial BillingCenter entities must delegate to </a><span class="cv_-_computer_voice">InCurrencySilo</span>. All other BillingCenter entities must delegate to <span class="cv_-_computer_voice">NotInCurrencySilo</span>. Only those entities that delegate to <span class="cv_-_computer_voice">NotInCurrencySilo</span> can hold data associated with more than one currency.</div>
      <div class="B_-_Body"><a name="1152536">For example:</a></div>
      <PRE class="CF_-_Code_First_Line"><a name="1152537">&lt;entity entity="Account" ... &gt;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1152538">  &lt;implementsEntity name="InCurrencySilo"/&gt;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1152539">  ...</a></PRE>
      <PRE class="CL_-_Code_Last_Line"><a name="1152540">&lt;/entity&gt;</a></PRE>
      <PRE class="CF_-_Code_First_Line"><a name="1152541">&lt;entity entity="AuthorityLimit" ... &gt;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1152542">  &lt;implementsEntity name="NotInCurrencySilo"/&gt;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1152543">  ...</a></PRE>
      <PRE class="CL_-_Code_Last_Line"><a name="1152544">&lt;/entity&gt;</a></PRE>
      <div class="B_-_Body"><a name="1152696">Attempting to instantiate </a><span class="cv_-_computer_voice">InCurrencySilo</span> entities without providing a currency generates a compile time error.</div>
      <h4 class="H2_-_Heading_2"><a name="1152545">Monetary Data Types</a></h4>
      <div class="B_-_Body"><a name="1152546">The </a><span class="cv_-_computer_voice">MonetaryAmount</span> data type represents money in BillingCenter. This data type corresponds to two columns in the database: one representing the amount and another representing the currency. See <a href="javascript:WWHClickedPopup('global', 'currency.20.4.html#2899086', '');" title="Monetary Amounts in the Data Model and in Gosu">“Monetary Amounts in the Data Model and in Gosu” in the </a><span class="bt_-_book_title"><a href="javascript:WWHClickedPopup('global', 'currency.20.4.html#2899086', '');" title="Monetary Amounts in the Data Model and in Gosu">Globalization Guide</a></span> for details.</div>
      <div class="NW_-_Note_Warning">
        <span class="w_-_warning">WARNING  </span><a name="1155639">Do not use the </a><span class="cv_-_computer_voice">currencyamount</span> column type in your data model nor the corresponding <span class="cv_-_computer_voice">CurrencyAmount</span> Gosu or Java type. </div>
      <h4 class="H2_-_Heading_2"><a name="1155640">Exceptions to Currency Silo Rules</a></h4>
      <div class="B_-_Body"><a name="1151828">If your configuration requires you to connect entities across silos, you can exclude a specific property from the currency silo. For example, you want to add a property of type </a><span class="cv_-_computer_voice">Currency</span> to an entity that is in a currency silo, but allow that property to use any currency. Essentially, you want to exclude that property from the currency silo. Because you are not benefitting from the protection that currency silos provide, you must prevent monetary amounts from being mixed across currencies.</div>
      <div class="B_-_Body"><a name="1151830">Any property of type </a><span class="cv_-_computer_voice">Currency</span> or <span class="cv_-_computer_voice">MonetaryAmount</span> is excluded from the silo if it is defined with the tag <span class="cv_-_computer_voice">ExcludeFromSilo</span>. For example:</div>
      <PRE class="CF_-_Code_First_Line"><a name="1151832">&lt;typekey name="ExcludedCurrency"</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1151833">         desc="Currency column that is excluded from the silo."</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1151834">         typelist="Currency"&gt;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1151835">   &lt;tag name="ExcludeFromSilo"/&gt;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1151836">&lt;/typekey&gt;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1151837">&lt;monetaryamount</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1151838">         name="ExcludedMonetaryAmount"</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1151839">         desc="MonetaryAmount that is excluded from the silo."&gt;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1152183">   &lt;tag name="ExcludeFromSilo"/&gt;</a></PRE>
      <PRE class="CL_-_Code_Last_Line"><a name="1152184">&lt;/monetaryamount&gt;</a></PRE>
      <div class="B_-_Body"><a name="1151843">You may also want to allow some links between silos. As with excluding properties from the silo, for any associations across silos you allow, you are forgoing the protection that currency silos provide. Therefore your configuration code must protect against mixing currencies between the connected silos.</a></div>
      <div class="B_-_Body"><a name="1151845">Any foreign key property is excluded from the silo if it is defined with the tag </a><span class="cv_-_computer_voice">CanLinkToAnotherSilo</span>. For example:</div>
      <PRE class="CF_-_Code_First_Line"><a name="1151847"> &lt;foreignkey fkentity="AnotherSiloedEntity"</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1151848">         name="CrossSiloLink"</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1151849">         desc="Link to another entity that can be in another silo."&gt;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1151850">   &lt;tag name="CanLinkToAnotherSilo"/&gt;</a></PRE>
      <PRE class="CL_-_Code_Last_Line"><a name="1156585"> &lt;/foreignkey&gt;</a></PRE>
      <script type="text/javascript" language="JavaScript1.2">
        <!--
          // Clear related topics
          //
          WWHClearRelatedTopics();

          document.writeln(WWHRelatedTopicsInlineHTML());
        // -->
      </script>
    </blockquote>
    <script type="text/javascript" language="JavaScript1.2">
      <!--
        document.write(WWHRelatedTopicsDivTag() + WWHPopupDivTag() + WWHALinksDivTag());
      // -->
    </script>
  </body>
</html>
<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xml:lang="en" lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
    <meta http-equiv="Content-Style-Type" content="text/css" />
    <!-- MOTW-DISABLED saved from url=(0014)about:internet -->
    <title>Web Services Authentication Plugin</title>
    <link rel="StyleSheet" href="css/webservices-wsi-publish.css" type="text/css" media="all" />
    <link rel="StyleSheet" href="css/webworks.css" type="text/css" media="all" />
    <link rel="StyleSheet" href="css/css-guidewire-extra.css" type="text/css" media="all" />
    <script type="text/javascript" language="JavaScript1.2" src="wwhdata/common/context.js"></script>
    <script type="text/javascript" language="JavaScript1.2" src="wwhdata/common/towwhdir.js"></script>
    <script type="text/javascript" language="JavaScript1.2" src="wwhdata/common/wwhpagef.js"></script>
    <script type="text/javascript" language="JavaScript1.2">
      <!--
        var  WebWorksRootPath = "";
      // -->
    </script>
    <script type="text/javascript" language="JavaScript1.2">
      <!--
        // Set reference to top level help frame
        //
        var  WWHFrame = WWHGetWWHFrame("", true);
      // -->
    </script>
    <script type="text/javascript" language="JavaScript1.2" src="scripts/expand.js"></script>
    <!-- THE FOLLOWING IS A GUIDEWIRE STYLE DEFINITION FOR THE LINK TO THIS FEATURE -->
    <link rel="StyleSheet" href="css/css-guidewire-extra.css" type="text/css" media="all" />
    <!-- THE FOLLOWING IS A GUIDEWIRE GSCRIPT FUNCTION FOR THE LINK TO THIS FEATURE -->
    <script type="text/javascript">
function guidewire_selectall()
{
var text_val=eval("document.linktothisurlform.urlfield");
text_val.focus();
text_val.select();
}
</script>
  </head>
  <body onLoad="WWHUpdate();" onUnload="WWHUnload();" onKeyDown="WWHHandleKeyDown((document.all||document.getElementById||document.layers)?event:null);" onKeyPress="WWHHandleKeyPress((document.all||document.getElementById||document.layers)?event:null);" onKeyUp="WWHHandleKeyUp((document.all||document.getElementById||document.layers)?event:null);">
    <!-- THE FOLLOWING IS A GUIDEWIRE DIV FOR THE 'LINK TO THIS' FEATURE -->
    <div id="linkToThisPage" class="popup" style="display: none;">
      <div class="popupTitle">Link Directly to This Page 
           <a href="#" onclick="var thePopup = getElementById('linkToThisPage');thePopup.style.display='none';return false;"><img class="popupClosebox" src="wwhelp/wwhimpl/common/images/close.gif" /></a></div>
      <div style="padding:6px;">
        <div class="popupText" id="linkToThisPageBookmark">An error has occurred if you see this messsage.</div>
        <form name="linktothisurlform" method="post" action="" style="width:275px;margin:0px">
          <input type="text" class="popupURLText" id="linkToThisPageURL" name="urlfield" rows="1" cols="55" onClick="guidewire_selectall();" onFocus="guidewire_selectall();"></input>
        </form>
      </div>
    </div>
    <br />
    <div class="WebWorks_Breadcrumbs" style="text-align: left;">
      <span>BillingCenter Integration Guide</span> : 
    <span class="WebWorks_Breadcrumbs" style="text-align: left;"><a class="WebWorks_Breadcrumb_Link" href="p-webservices.html#3699369">Web Services</a> : <a class="WebWorks_Breadcrumb_Link" href="webservices-wsi-publish.07.01.html#3699369">Publishing Web Services</a> : Web Services Authentication Plugin</span></div>
    <hr align="left" />
    <blockquote>
      <h3 class="H1_-_Heading_1"><a name="3699369">Web Services Authentication Plugin</a></h3>
      <div class="B_-_Body"><a name="3699373">To handle the name/password authentication for a user connecting to WS-I web services, BillingCenter delegates this job to the currently registered implementation of the </a><span class="cv_-_computer_voice">WebservicesAuthenticationPlugin</span> plugin interface. There must always be a registered version of this plugin, otherwise web services that require permissions cannot authenticate successfully.</div>
      <div class="B_-_Body"><a name="3809721">The </a><span class="cv_-_computer_voice">WebservicesAuthenticationPlugin</span> plugin interface supports WS-I web service connections only. </div>
      <h4 class="H2_-_Heading_2"><a name="3699374">The Default Web Services Authentication Plugin Implementation</a></h4>
      <div class="B_-_Body"><a name="3809944">To authenticate web service requests, it is common to set up non-human Guidewire application users through regular BillingCenter user administration. These non-human users never use their usernames and passwords to sign into the ClaimCenter user interface. Instead, an external system passes the username and password in the request headers of its WS-I web service requests to authenticate. </a></div>
      <div class="B_-_Body"><a name="3699378">The default configuration of BillingCenter has a registered built-in implementation of WS-I web service authentication plugin. The class is called </a><span class="cv_-_computer_voice">gw.plugin.security.DefaultWebservicesAuthenticationPlugin</span>. In the default configuration of BillingCenter, this class does two things:</div>
      <div class="LS_-_List_Start_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="LS_-_List_Start_inner" style="width: 15pt; white-space: nowrap">
                <span class="ri_-_run_in_header">	1.	</span>
              </div>
            </td>
            <td width="100%">
              <div class="LS_-_List_Start_inner"><a name="3784076">Looks at HTTP request headers for WS-I authentication information.</a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="LI_-_List_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="LI_-_List_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="ri_-_run_in_header">	2.	</span>
              </div>
            </td>
            <td width="100%">
              <div class="LI_-_List_Item_inner"><a name="3784097">Performs authentication against the local BillingCenter users in the database. This class calls the registered implementation of the </a><span class="cv_-_computer_voice">AuthenticationServicePlugin</span> plugin interface. </div>
            </td>
          </tr>
        </table>
      </div>
      <div class="NI_-_Note_Important">
        <span class="n_-_note">IMPORTANT   </span><a name="3784548">If you write your own implementation of the </a><span class="cv_-_computer_voice">AuthenticationServicePlugin</span> plugin interface, be aware of this interaction with WS-I web service authentication. For example, you might want LDAP authentication for most users, but for web service authentication to authenticate against the current BillingCenter application administrative data.</div>
      <div class="B_-_Body"><a name="3785269">To authenticate only some user names to Guidewire application credentials, your </a><span class="cv_-_computer_voice">AuthenticationServicePlugin</span> code must check the user name and compare to a list of special web service user names. If the user name matches, do not use LDAP and instead authenticate with the local application administrative data. To do this in your <span class="cv_-_computer_voice">AuthenticationServicePlugin</span> implementation, use the code:</div>
      <div class="CS_-_Code_Single_Line"><a name="3785232">_handler.verifyInternalCredentials(username, password)</a></div>
      <div class="B_-_Body"><a name="3797004">For details of authentication handlers and the </a><span class="cv_-_computer_voice">AuthenticationServicePlugin</span> plugin interface, see <a href="javascript:WWHClickedPopup('integration', 'authentication.14.4.html#1454315', '');" title="User Authentication Service Plugin">“User Authentication Service Plugin”</a>.</div>
      <h4 class="H2_-_Heading_2"><a name="3699383">Writing an Implementation of the Web Services Authentication Plugin</a></h4>
      <div class="B_-_Body"><a name="3699384">Most customers do not need to write a new implementation of the </a><span class="cv_-_computer_voice">WebservicesAuthenticationPlugin</span> plugin interface. Typical changes to WS-I authentication logic are instead in your <span class="cv_-_computer_voice">AuthenticationServicePlugin</span> plugin implementation. See related discussion in <a href="javascript:WWHClickedPopup('integration', 'webservices-wsi-publish.07.08.html#3699374', '');" title="Web Services Authentication Plugin">“The Default Web Services Authentication Plugin Implementation”</a>.</div>
      <div class="B_-_Body"><a name="3785640">You can change the default web services authentication behavior to get the credentials from different headers. You can write your own </a><span class="cv_-_computer_voice">WebservicesAuthenticationPlugin</span> plugin implementation to implement custom logic. </div>
      <div class="B_-_Body"><a name="3699385">The </a><span class="cv_-_computer_voice">WebservicesAuthenticationPlugin</span> interface has a single plugin method that your implementation must implement, called <span class="cv_-_computer_voice">authenticate</span>. The <span class="cv_-_computer_voice">authenticate</span> method takes one parameter of type <span class="cv_-_computer_voice">gw.plugin.security.WebservicesAuthenticationContext</span>. The object passed to your <span class="cv_-_computer_voice">authenticate</span> method contains authentication information, such as the name and password. </div>
      <h6 class="HS_-_Head_Sub"><a name="3699386">Properties on a Web Services Authentication Context</a></h6>
      <div class="B_-_Body"><a name="3699387">Important properties on a </a><span class="cv_-_computer_voice">WebservicesAuthenticationContext</span> include:</div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><span class="cv_-_computer_voice"><a name="3699388">HttpHeaders</a></span> – HTTP headers of type <span class="cv_-_computer_voice">gw.xml.ws.HttpHeaders</span>. This includes a list of header names</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><span class="cv_-_computer_voice"><a name="3699389">HttpServletRequest</a></span> – the HTTP servlet request object, as the standard Java object <span class="cv_-_computer_voice">javax.servlet.http.HttpServletRequest</span>.</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><span class="cv_-_computer_voice"><a name="3699390">RequestSOAPHeaders</a></span> – The request SOAP headers, as an XML element (<span class="cv_-_computer_voice">XmlElement</span>)</div>
            </td>
          </tr>
        </table>
      </div>
      <h6 class="HS_-_Head_Sub"><a name="3699391">Values to Return from Your Default Web Services Authentication Plugin</a></h6>
      <div class="B_-_Body"><a name="3699392">The value that your implementation returns from its </a><span class="cv_-_computer_voice">authenticate</span> method depend on whether authentication succeeds:</div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a name="3699396">If authentication succeeds, return the relevant </a><span class="cv_-_computer_voice">User</span> object from the BillingCenter database.</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a name="3699397">If you cannot attempt to authenticate for some reason, such as network problems, return </a><span class="cv_-_computer_voice">null</span>.</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a name="3811023">If authentication fails for other reasons, throw an exception of type </a><span class="cv_-_computer_voice">WsiAuthenticationException</span><span style="font-family: &quot;Lucida Sans Typewriter&quot;; font-size: 7.0pt">.</span></div>
            </td>
          </tr>
        </table>
      </div>
      <script type="text/javascript" language="JavaScript1.2">
        <!--
          // Clear related topics
          //
          WWHClearRelatedTopics();

          document.writeln(WWHRelatedTopicsInlineHTML());
        // -->
      </script>
    </blockquote>
    <script type="text/javascript" language="JavaScript1.2">
      <!--
        document.write(WWHRelatedTopicsDivTag() + WWHPopupDivTag() + WWHALinksDivTag());
      // -->
    </script>
  </body>
</html>